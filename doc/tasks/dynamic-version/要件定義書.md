# 要件定義書: ツールバーのバージョン動的表示

## 背景

現在、duofmのTUI画面上部のツールバーに表示されるバージョン番号が `v0.1.0` でハードコードされている。一方、`duofm --version` コマンドでは、Makefileの`-ldflags`によりgitタグから動的にバージョンが取得されて正しく表示される。

この不整合により、ユーザーが実行中のバージョンを正確に把握できない問題がある。

## 目的

- ツールバーに表示されるバージョンを、CLIの`--version`オプションと同じくビルド時に動的に埋め込まれたバージョンで表示する
- バージョン情報の一元管理を実現し、ハードコードを排除する

## 要件

### 機能要件

1. **FR1: ツールバーのバージョン表示**
   - TUI画面上部のツールバーに表示されるバージョンを動的に取得する
   - `duofm --version`と同じバージョン文字列を表示する

2. **FR2: バージョン情報の共有**
   - main.goで定義される`version`変数をUIパッケージから参照可能にする
   - バージョン情報は一箇所で定義・管理する

### 非機能要件

1. **NFR1: 後方互換性**
   - 既存のビルドプロセス（Makefile）に影響を与えない
   - `-ldflags`による既存のバージョン埋め込み方式を維持する

2. **NFR2: コード品質**
   - ハードコードされたバージョン文字列を完全に排除する
   - DRY原則に従う

## 現状分析

### 現在の実装

1. `cmd/duofm/main.go`:
   - `var version = "dev"` でバージョン変数を定義
   - `--version`オプションで正しく動的バージョンを表示

2. `Makefile`:
   - gitタグからVERSION変数を設定
   - `-ldflags -X main.version=$(VERSION)` でビルド時に埋め込み

3. `internal/ui/model.go`:
   - 4箇所でバージョンがハードコード（`"duofm v0.1.0"`）
   - `View()`関数の898, 949, 1005, 1033行目

### 問題点

- UIパッケージが`main`パッケージの変数にアクセスできない（Goの依存関係制約）
- バージョン文字列が複数箇所にハードコードされている

## 解決アプローチ

バージョン変数を`internal/version`パッケージに移動し、main.goとUIから参照する構成とする。

## 成功基準

1. `duofm --version`とTUIツールバーが同じバージョンを表示する
2. ソースコード内にバージョン番号のハードコードがない
3. `make build`で正常にビルドできる
4. gitタグがない環境では`dev-<commit>`形式で表示される

## 制約

- Goの循環参照を避けるパッケージ構成が必要
- 既存のMakefileの`-ldflags`による埋め込みパターンを踏襲する
