# 要件定義書: East Asian Width 設定

## 概要

Unicode の Ambiguous Width 文字（`☆`、`ü`、`①`、`→` など）の表示幅計算を、モダンターミナルの実際の表示に合わせて幅1として扱うように設定する。

## 背景

### 問題

`go-runewidth` ライブラリは、日本語ロケール（`LANG=ja_JP.UTF-8`）環境では `EastAsianWidth = true` を自動設定する。これにより Ambiguous Width 文字が幅2として計算されるが、多くのモダンターミナル（Alacritty、Tabby など）はこれらの文字を幅1で表示する。

この不一致により、以下の問題が発生する：
- ファイルリストの列がズレる
- ステータスバーのレイアウトが崩れる
- パディング計算が不正確になる

### 影響を受ける文字の例

| 文字 | Unicode | 名称 | EAW=true | EAW=false | 実際の表示 |
|------|---------|------|----------|-----------|-----------|
| `☆` | U+2606 | WHITE STAR | 幅2 | 幅1 | 幅1 |
| `ü` | U+00FC | LATIN SMALL U WITH DIAERESIS | 幅2 | 幅1 | 幅1 |
| `①` | U+2460 | CIRCLED DIGIT ONE | 幅2 | 幅1 | 幅1 |
| `→` | U+2192 | RIGHTWARDS ARROW | 幅2 | 幅1 | 幅1 |

## 要件

### 機能要件

1. **FR-1: EastAsianWidth の強制設定**
   - アプリケーション起動時に `runewidth.DefaultCondition.EastAsianWidth = false` を設定する
   - これにより Ambiguous Width 文字は常に幅1として計算される

### 非機能要件

1. **NFR-1: パフォーマンス**
   - 起動時の1回のみ設定するため、パフォーマンスへの影響なし

2. **NFR-2: 互換性**
   - モダンターミナル（Alacritty、Tabby、iTerm2、Windows Terminal など）で正しく動作
   - 古い CJK ターミナルでは逆にズレる可能性があるが、現代の使用状況を優先

## 対象外

- 設定ファイルによる切り替え機能（将来の拡張として検討）
- ターミナルごとの自動検出

## 成功基準

1. `☆`、`ü`、`①` などを含むファイル名が正しく整列する
2. Alacritty、Tabby で動作確認済み
3. 既存のテストがすべてパスする
